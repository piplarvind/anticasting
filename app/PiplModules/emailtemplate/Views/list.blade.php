@extends(config("piplmodules.back-view-layout-location"))@section("meta")<title>Manage Email Templates</title><link rel="stylesheet" type="text/css" href="{{url('public/media/backend/css/datatable/select2.css')}}"/><link rel="stylesheet" type="text/css" href="{{url('public/media/backend/css/datatable/jquery.dataTables.min.css')}}"/><link rel="stylesheet" type="text/css" href="{{url('public/media/backend/css/datatable/dataTables.bootstrap4.min.css')}}"/><style type="text/css">    .modal-header, h4, .close {        /*background-color: #ee3900;        color:white !important;*/        text-align: center;        font-size: 30px;    }    .modal-footer {        background-color: #f9f9f9;    }    /* Important part */    .modal-dialog{        overflow-y: initial !important;    }    .modal-body{        height: 500px;        width: 100%;        overflow-y: auto;        overflow-x: auto;    }</style>@endsection@section('content')<section class="tabcontent_area">    <div class="container-fluid">        <div class="tab_headings clearfix">            <h3 class="float-left">Manage Email Templates</h3>            <ol class="breadcrumb float-right">                <li class="breadcrumb-item"><a href="{{url('admin/dashboard')}}">Dashboard</a></li>                <li class="breadcrumb-item active" aria-current="page">Manage Email Templates</li>            </ol>        </div>        @if (session('status'))        <div class="alert alert-success">            {{ session('status') }}        </div>        @endif        <div class="tabcontent_inner">            <div class="tabcontent_part">                <div class="tcpart_inner">                    <div class="tcpart_table">                                                <table class="table table-bordered" id="cms_table">                            <thead class="table_head">                                <tr>                                    <th class="table_title">Id</th>                                    <th class="table_title">Subject</th>                                    <th class="table_title">                                        <a href="javascript:void(0);">Language<i class="fa fa-sort" aria-hidden="true"></i></a>                                    </th>                                    <th class="table_title">Create On</th>                                    <th class="table_title text-center">Action</th>                                </tr>                            </thead>                            <tbody></tbody>                        </table>                    </div>                </div>            </div>        </div>    </div></section><div class="modal" id="myModal" role="dialog">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header text-center">                <h4 class="modal-title ">Email Template</h4>                <button id="close-modal" type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-close" style="font-size:24px;color:red"></i></button>            </div>            <div id="modal_body" class="modal-body"></div>            <div class="modal-footer">            </div>        </div>    </div></div><script type="text/javascript" src="{{url('public/media/backend/js/datatable/select2.min.js')}}"></script>    <script type="text/javascript" src="{{url('public/media/backend/js/datatable/jquery.dataTables.1.10.19.min.js')}}"></script>    <script type="text/javascript" src="{{url('public/media/backend/js/datatable/dataTables.bootstrap4.min.js')}}"></script>    <script type="text/javascript" src="{{url('public/media/backend/js/datatable/table-managed.js')}}"></script>    <script type="text/javascript" src="{{url('public/media/backend/js/select-all-delete.js')}}"></script>    <script type="text/javascript">        var myModal = document.getElementById('myModal');        $(function () {            $('#cms_table').DataTable({                processing: true,               serverSide: true,//                bStateSave: true,                order: [[0, 'desc']],                aLengthMenu: [                    [25, 50, 100, 200, -1],                    [25, 50, 100, 200, "All"]                ],                ajax: '{{url("admin/email-templates-data")}}',                columnDefs: [{                        "defaultContent": "-",                        "targets": "_all"                    }],                columns: [                    {data: 'id', name: 'id', orderable: false},                     { data: 'subject',                render: function ( data, type, row ) {                    if ( type === 'display' ) {                        return '<a href="{{url("/admin/email-templates/update/")}}/' + row.id + '" title="Edit">'+ row.subject +'</a>';                    }                    return data;                },                name: 'subject'},//                    {data: 'subject', name: 'subject'},                     {data: 'Language', name: 'Language'},                    {data: 'posted_date', name: 'posted_date'},                    {data: "Update",                        render: function (data, type, row) {                            if (type === 'display') {                                //return '<div class="td_content text-center"><a href="{{url("/admin/email-templates/update/")}}/' + row.id + '" data-toggle="tooltip" data-placement="top" title="Edit"><img src="{{url('public/media/backend/images/edit-icon.png')}}" alt="Edit"></a></div>';                                return '<div class="social show-moreOptions openPops_67 text-center"><ul class="list-unstyled"><li style="display:inline-block" class="entypo"><a style="cursor:pointer" onclick="openTemplateView(\''+row.template_key +'\', \'en\')" data-toggle="tooltip" data-placement="top" title="View"><img src="{{url('public/media/backend/images/english.png')}}" alt="English"></a></li> <li style="display:inline-block;margin-left:5px;" class="entypo"><a style="cursor:pointer" onclick="openTemplateView(\''+row.template_key +'\', \'hi\')" data-toggle="tooltip" data-placement="top" title="View"><img src="{{url('public/media/backend/images/hindi.png')}}" alt="View"></a></li></ul></div>';                            }                            return data;                        },                        "orderable": false,                        name: 'Action'                    }                ]            });        });         function selectCountryLang(ele)        {            var locale = $(ele).children("option:selected").val();            var countryId = $(ele).children("option:selected").attr('id');            var url = '{{ url("admin/email-template/update-language") }}' + '/' + countryId + '/' + locale;            window.location.href = url;        }        function openTemplateView(id,lang)        {            $.ajax({                url: '{{ url('/admin/email-templates/get-template-view') }}'+'/'+id+'/'+lang,                type: 'get',                dataType: 'html',                success: function (res)                {                    myModal.style.display = "block";                    $('#modal_body').html(res);                },//                data: JSON.stringify(person)            });//            var modal = document.getElementById('myModal');//            modal.style.display = "block";//            $("#myModal #user_id").val(user_id);        }        $("#close-modal").click(function () {            myModal.style.display = "none";        });        $('#myModal').appendTo('body');    </script>    @endsection